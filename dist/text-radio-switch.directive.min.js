!function(){"use strict";angular.module("textRadioSwitch",[]).directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,i,r){t.$last===!0&&e(function(){t.$emit("trsRepeatFinish")})}}}]).directive("textRadioSwitch",["$window",function(e){var t=0;return{restrict:"E",replace:!0,require:"ngModel",template:'\n<div class="text-radio-switch" id="{{::trsWidgetName}}">\n  <div class="text-radio-switch__viewport">\n    <label ng-repeat="item in ::trsItems" on-finish-render="::ngRepeatFinished" class="text-radio-switch__label" \n    ng-class="{\'text-radio-switch__label_active\': item[trsKeyField]==trsItemSelected}" for="{{::(trsWidgetName + \'__\' + item[trsKeyField])}}"><input \n    ng-click="trsSelect(item)" type="radio" value="item[trsKeyField]" \n    id="{{::(trsWidgetName + \'__\' + item[trsKeyField])}}"\n    ng-checked="{{item[trsKeyField]==trsItemSelected}}" name="{{::trsWidgetName}}" />{{::item[trsNameField]}}</label>\n  </div>\n  <div class="text-radio-switch__left">&lt;</div>\n  <div class="text-radio-switch__right">&gt;</div>\n  <div class="text-radio-switch__highlight-bar"><span></span></div>\n</div>\n',scope:{trsItems:"=items",trsKeyField:"@keyField",trsNameField:"@nameField"},link:function(i,r,n,s){function a(){var e=document.querySelector('label[for="'+i.trsWidgetName+"__"+i.trsItemSelected+'"]'),t=document.querySelector("#"+i.trsWidgetName+" span");e&&t&&angular.element(t).css({width:e.offsetWidth+"px",left:e.offsetLeft+"px"})}function d(){var e=document.querySelectorAll("#"+i.trsWidgetName+" label"),t=0;Array.prototype.forEach.call(e,function(e){t+=e.offsetWidth,console.log(e.style);var i=window.getComputedStyle(e);t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t+=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10)});var r=document.querySelector("#"+i.trsWidgetName+" .text-radio-switch__highlight-bar");angular.element(r).css({width:t+"px"})}angular.element(e);t++,i.trsWidgetName="text-radio-switch-widget-"+t,i.trsItemSelected=s.$modelValue,s.$render=function(){i.trsItemSelected=s.$viewValue,a()},i.$on("trsRepeatFinish",function(){setTimeout(function(){a(),d()},50)}),i.trsSelect=function(e){s.$setViewValue(e[i.trsKeyField]),i.trsItemSelected=s.$viewValue,a()}}}}])}();